#! /bin/sh

git checkout -f `git log --pretty="%H" | tail -1`

git branch -f main @
git branch -f topic2 @
git branch -f topic3 @

git checkout main

echo main > main.txt ; git add main.txt
echo OK > code.md ; git add code.md
git commit -a -m "OK"

echo main >> main.txt
echo BAD > code.md
git commit -a -m "BAD"

git branch -f topic1 @

echo OK > code.md
git commit -a -m "main OK"

git checkout topic1

echo OK > code.md
git commit -a -m "topic1 OK"

echo topic1 > topic1.txt; git add topic1.txt
echo BAD > code.md
git commit -a -m "topic1 BAD"

#####

git branch -f topic1-rebase @

git checkout topic1-rebase
git rebase main
